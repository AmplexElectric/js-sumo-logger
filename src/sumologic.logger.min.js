!function(e,o){function t(){this.sendErrors=!1,this.endpoint="",this.interval=0,this.session="",this.timestamp="",this.hostName="",this.sourceCategory="",this.name="",this.onSuccess=!1,this.onError=!1}function s(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var o=16*Math.random()|0,t="x"==e?o:3&o|8;return t.toString(16)})}function n(o){e&&e.console&&"function"==typeof e.console.log&&console.log(o)}function i(o,t){if(o.sendErrors=t,o.sendErrors===!0){var s=e.onerror;e.onerror=function(t,n,i,r){var t="message: "+t+", url: "+n+", line_num: "+i+", col_num: "+r;o.log({error:"BrowserJsException",exception:t}),s&&"function"==typeof s&&s.apply(e,arguments)}}}var r="sumologic.logger.session",a=r.length+1,u=[];t.prototype={reset:function(){u=[],this.endpoint="",this.interval=0,this.session="",this.timestamp="",this.hostName="",this.sourceCategory="",this.name=""},getCurrentLogs:function(){return u},setSession:function(e){e?(this.session=e,this.setCookie(this.session)):this.session||(this.session=this.getCookie(),this.session||(this.session=s(),this.setCookie(this.session)))},config:function(e){if(!e||"object"!=typeof e)return void n("Sumo Logic Logger requires you to set an endpoint.");if(!e.endpoint||""===e.endpoint)return void n("Sumo Logic Logger requires you to set an endpoint.");if(this.endpoint=e.endpoint,e.interval&&(this.interval=e.interval),this.setSession(e.sessionKey?e.sessionKey:s()),e.sendErrors&&i(e.sendErrors),e.sourceName&&(this.name=e.sourceName),e.sourceCategory&&(this.sourceCategory=e.sourceCategory),e.hostName&&(this.hostName=e.hostName),e.onSuccess&&(this.onSuccess=e.onSuccess),e.onError&&(this.onError=e.onError),this.interval>0){var o=this;setInterval(function(){o.sendLogs()},this.interval)}},log:function(o,t){if(""===this.endpoint)return void n("Sumo Logic Logger requires you to set an endpoint before pushing logs.");if(!o)return void n("Sumo Logic Logger requires that you pass a value to log.");t=t||!1;var s=o instanceof Array,i=s?o[0]:o,r=typeof i;if("undefined"===r||"string"===r&&""===i)return void n("Sumo Logic Logger requires that you pass a value to log.");if("object"===r&&0===Object.keys(o).length)return void n("Sumo Logic Logger requires that you pass a non-empty JSON object to log.");s||(o=[o]);var a=new Date;t&&(t.sessionKey&&this.setSession(t.sessionKey),t.timestamp&&(a=t.timestamp)),this.timestamp=a.toUTCString();var c=this,h=o.map(function(o){if("string"==typeof o)return JSON.stringify({msg:o,sessionId:c.session,url:encodeURI(e.location),timestamp:c.timestamp});var t={sessionId:c.session,url:encodeURI(e.location),timestamp:c.timestamp};return Object.keys(o).forEach(function(e){t[e]=o[e]}),JSON.stringify(t)});u=u.concat(h),0===this.interval&&this.sendLogs()},logSent:function(){},sendLogs:function(){if(0!==u.length)try{var e=new XMLHttpRequest;if(this.onError&&e.addEventListener("error",this.onError),this.onSuccess){var o=this.onSuccess;e.addEventListener("load",function(){u=[],o()})}e.open("POST",this.endpoint+"?callback=logSent",!0),e.setRequestHeader("Content-Type","application/json"),""!==this.name&&e.setRequestHeader("X-Sumo-Name",this.name),""!==this.sourceCategory&&e.setRequestHeader("X-Sumo-Category",this.sourceCategory),""!==this.hostName&&e.setRequestHeader("X-Sumo-Host",this.hostName),e.send(u.join("\n"))}catch(t){this.onError&&this.onError()}},flushLogs:function(){this.sendLogs()},emptyLogQueue:function(){u=[]},getCookie:function(){var e=o.cookie,t=e.indexOf(r);if(0>t)return!1;var s=e.indexOf(";",t+1);return s=0>s?e.length:s,e.slice(t+a,s)},setCookie:function(e){o.cookie=r+"="+e}};var c=e.SLLogger,h=new t;if(c&&c.length){var g=0,m=c.length;for(g=0;m>g;g++)h.log(c[g])}e.SLLogger=h,e.SumoLogger=t}(window,document);