!function(e,t){function s(){this.sendErrors=!1,this.endpoint="",this.interval=0,this.session="",this.timestamp="",this.hostName="",this.sourceCategory="",this.tempCategory="",this.name="",this.successCB=!1,this.errorCB=!1,this.configSourceCategorySet=!1}function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,s="x"==e?t:3&t|8;return s.toString(16)})}function i(t){e&&e.console&&"function"==typeof e.console.log&&console.log(t)}function r(t,s){if(t.sendErrors=s,t.sendErrors===!0){var o=e.onerror;e.onerror=function(s,i,r,n){var s="message: "+s+", url: "+i+", line_num: "+r+", col_num: "+n;t.log({error:"BrowserJsException",exception:s}),o&&"function"==typeof o&&o.apply(e,arguments)}}}var n="sumologic.logger.session",a=n.length+1,u=[];s.prototype={reset:function(){u=[],this.endpoint="",this.interval=0,this.session="",this.timestamp="",this.hostName="",this.sourceCategory="",this.tempCategory="",this.name=""},setSession:function(e){e?(this.session=e,this.setCookie(this.session)):this.session||(this.session=this.getCookie(),this.session||(this.session=o(),this.setCookie(this.session)))},config:function(e){if(!e||"object"!=typeof e)return void i("Sumo Logic Logger requires you to set an endpoint.");if(!e.endpoint||""===e.endpoint)return void i("Sumo Logic Logger requires you to set an endpoint.");if(this.endpoint=e.endpoint,e.interval&&(this.interval=e.interval),this.setSession(e.sessionKey?e.sessionKey:o()),e.sendErrors&&r(e.sendErrors),e.sourceName&&(this.name=e.sourceName),e.sourceCategory&&(this.sourceCategory=e.sourceCategory,this.configSourceCategorySet=!0),e.hostName&&(this.hostName=e.hostName),e.successCB&&(this.successCB=e.successCB),e.errorCB&&(this.errorCB=e.errorCB),this.interval>0){var t=this;setInterval(function(){t.sendLogs()},this.interval)}},log:function(t,s){if(""===this.endpoint)return void i("Sumo Logic Logger requires you to set an endpoint before pushing logs.");if(!t)return void i("Sumo Logic Logger requires that you pass a value to log.");s=s||!1;var o=t instanceof Array,r=o?t[0]:t,n=typeof r;if("undefined"===n||"string"===n&&""===r)return void i("Sumo Logic Logger requires that you pass a value to log.");if("object"===n&&0===Object.keys(t).length)return void i("Sumo Logic Logger requires that you pass a non-empty JSON object to log.");o||(t=[t]);var a=new Date;s&&(s.sessionKey&&this.setSession(s.sessionKey),s.timestamp&&(a=s.timestamp),s.sourceCategory&&(this.configSourceCategorySet&&(this.tempCategory=this.sourceCategory),this.sourceCategory=s.sourceCategory)),this.timestamp=a.toUTCString();var c=this,h=t.map(function(t){if("string"==typeof t)return JSON.stringify({msg:t,sessionId:c.session,url:encodeURI(e.location),timestamp:c.timestamp});var s={sessionId:c.session,url:encodeURI(e.location),timestamp:c.timestamp};return Object.keys(t).forEach(function(e){s[e]=t[e]}),JSON.stringify(s)});u=u.concat(h),0===this.interval&&this.sendLogs()},logSent:function(){},sendLogs:function(){if(0!==u.length){try{var e=new XMLHttpRequest;if(this.errorCB&&e.addEventListener("error",this.errorCB),this.successCB){var t=this.successCB;e.addEventListener("load",function(){u=[],t()})}e.open("POST",this.endpoint+"?callback=logSent",!0),e.setRequestHeader("Content-Type","application/json"),""!==this.name&&e.setRequestHeader("X-Sumo-Name",this.name),""!==this.sourceCategory&&e.setRequestHeader("X-Sumo-Category",this.sourceCategory),""!==this.hostName&&e.setRequestHeader("X-Sumo-Host",this.hostName),e.send(u.join("\n"))}catch(s){this.errorCB&&this.errorCB()}this.configSourceCategorySet&&(this.sourceCategory=this.tempCategory,this.tempCategory="")}},flushLogs:function(){this.sendLogs()},getCookie:function(){var e=t.cookie,s=e.indexOf(n);if(0>s)return!1;var o=e.indexOf(";",s+1);return o=0>o?e.length:o,e.slice(s+a,o)},setCookie:function(e){t.cookie=n+"="+e}};var c=e.SLLogger,h=new s;if(c&&c.length){var g=0,m=c.length;for(g=0;m>g;g++)h.log(c[g])}e.SLLogger=h,e.SumoLogger=s}(window,document);